# Проект myRPC

## Описание

Проект `myRPC` представляет собой механизм удалённого вызова команд, состоящий из клиентского и серверного приложений. Включает следующие компоненты:
- **myRPC-client** — консольное приложение для отправки команд на сервер.
- **myRPC-server** — серверное приложение (Daemon), принимающее команды и выполняющее их.

## Системные требования

- Компилятор GCC
- Утилита `make`
- Установленный пакет `fakeroot` для создания deb-пакетов
- Поддержка разработки deb-пакетов (`dpkg-deb`)

## Сборка проекта

Для сборки `myRPC-client` и `myRPC-server` используйте Makefile, который автоматизирует процесс компиляции и создания deb-пакетов.

### Подлючение библиотеки проекта

1. При работе на локальном машине, требуется подключить библиотеку `libmysyslog` для работоспособности проекта.
2. Выполните следующую команду:
```sh
export LD_LIBRARY_PATH=/home/user/myRPC/libmysyslog:$LD_LIBRARY_PATH
```

### Полная сборка проекта

1. Перейдите в директорию с исходным кодом `myRPC`.
2. Выполните команду:
   ```sh
   make all
   ```
   Makefile создаст исходные папки и исполняемые файлы для работы с проектом.

3. Чтобы очистить директорию от скомпилированных файлов, используйте команду:
   ```sh
   make clean
   ```
### Сборка myRPC-client

1. Перейдите в директорию с исходным кодом `myRPC-client`.
2. Выполните команду:
   ```sh
   make
   ```
   Это создаст исполняемый файл `myRPC-client` в директории `myRPC/myRPC-client/bin`.

3. Для создания deb-пакета выполните команду:
   ```sh
   make deb
   ```
   Это создаст deb-пакет в директории `deb/myrpc-client/`.

4. Чтобы очистить директорию от скомпилированных файлов, используйте команду:
   ```sh
   make clean
   ```

### Сборка myRPC-server

1. Перейдите в директорию с исходным кодом `myRPC-server`.
2. Выполните команду:
   ```sh
   make
   ```
   Cоздаст исполняемый файл `myRPC-server` в директории `myRPC/myRPC-server/bin`.

3. Для создания deb-пакета выполните команду:
   ```sh
   make deb
   ```
   Cоздаст deb-пакет в директории `deb/myrpc-server/`.

4. Чтобы очистить директорию от скомпилированных файлов, используйте команду:
   ```sh
   make clean
   ```

## Установка и настройка

После сборки и создания deb-пакетов можно установить клиент и сервер с помощью команды `dpkg`:

```sh
sudo dpkg -i deb/myrpc-client.deb
sudo dpkg -i deb/myrpc-server.deb
```

### Настройка сервера

1. Создайте конфигурационный файл `/etc/myRPC/myRPC.conf` для настройки параметров сервера. Пример файла:
   ```conf
   # Порт, на котором будет слушать сервер
   port = 28753
   # Тип сокета : stream(TCP) или dgram(UDP)
   socket_type = stream
   ```

2. Создайте файл пользователей `/etc/myRPC/users.conf`, в котором указаны разрешённые пользователи:
   ```conf
   # Список разрешённых пользователей
   username1
   username2
   username3
   ```

## Использование

### myRPC-client

Клиентское приложение `myRPC-client` позволяет отправлять команды на сервер для выполнения. Примеры использования:

1. Отправка команды с использованием потокового сокета (TCP):
   ```sh
   myRPC-client -c "ls -la" -h "127.0.0.1" -p 28753 -s
   ```
   Команды:
   - `-c` — команда для выполнения на сервере.
   - `-h` — IP-адрес сервера.
   - `-p` — порт, на котором работает сервер.
   - `-s` — использование TCP сокета.

2. Отправка команды с использованием датаграммного сокета (UDP):
   ```sh
   myRPC-client -c "date" -h "127.0.0.1" -p 28753 -d
   ```
   Флаг `-d` указывает на использование UDP сокета.

### myRPC-server

Для запуска сервера выполните следующую команду:

```sh
sudo myRPC-server
```

## Логирование и отладка

 `myRPC-server` использует библиотеку `libmysyslog` для ведения журнала событий. Все события записываются в лог файл `/var/log/myrpc.log`.




